/* empty css             */import{v as J,E as K}from"./el-divider-b29d1674.js";import{E as Q,a as W}from"./el-form-item-e36cdca3.js";import{a as X,E as Y}from"./el-input-10cd3bf3.js";import{E as $}from"./el-card-7ce17afd.js";import{E as ee,a as oe}from"./el-descriptions-item-af0d124c.js";import"./el-icon-ddec6614.js";import{d as se,u as te,o as ae,O as V,r as D,a as le,aH as re,c as S,e as ne,f as e,w as o,Z as de,i as s,A as ie,a6 as c,h as t,j as a,D as m,E as g,C as ce,p as ue,k as _e,_ as me}from"./index-1fb0ff9b.js";import{u as pe}from"./setting-81fc4885.js";import{a as B}from"./index-b36a6823.js";const p=v=>(ue("data-v-ba79aadd"),v=v(),_e(),v),fe=p(()=>t("div",{class:"card-header"},"我的信息",-1)),we={class:"card-footer"},ge=p(()=>t("span",{style:{"margin-left":"12px",color:"dimgray"}},"游戏ID在第一次成功登录时获取，之后您只能登录至此ID的租赁服",-1)),ve={class:"userinfo-cell-item"},he={class:"userinfo-cell-item"},ye={class:"userinfo-cell-item"},Pe={class:"userinfo-cell-item"},be={class:"userinfo-cell-item"},Ce={class:"userinfo-cell-item"},Ee=p(()=>t("div",{class:"card-header"},"FBToken",-1)),xe={class:"card-footer"},ke=p(()=>t("span",{style:{"margin-left":"12px",color:"dimgray"}},"PhoenixBuilder 用于登录您账户的凭证",-1)),De=p(()=>t("div",{class:"card-header"},"修改密码",-1)),Ie={class:"card-footer"},Ve=p(()=>t("span",{style:{"margin-left":"12px",color:"dimgray"}},"更新您的登录密码",-1)),Se=se({__name:"index",setup(v){let I=pe(),d=te(),F=async()=>{await d.userInfo()};ae(()=>{F()});const T=V(()=>B(d.ucreate)),U=V(()=>B(d.uexpire));let y=D(!1),N=async()=>{y.value=!0,g({type:"info",title:"获取 FBToken",message:"获取中",duration:3e3});try{await d.userDownload(),g({type:"success",title:"获取 FBToken",message:"获取成功",duration:3e3})}catch(r){console.log(r)}finally{y.value=!1}},f=D(null),l=le({oldPassword:"",newPassword:"",repassword:""}),P=()=>{l.oldPassword="",l.newPassword="",l.repassword="";try{setTimeout(()=>{f.value&&f.value.clearValidate(["oldPassword","newPassword","repassword"])},200)}catch(r){console.log(r)}};re(()=>{P()});let b=D(!1);const R={oldPassword:[{required:!0,message:"请输入旧密码",trigger:"blur"}],newPassword:[{required:!0,message:"请输入新密码",trigger:"blur"}],repassword:[{required:!0,message:"请确认新密码",trigger:"blur"},{validator:(r,n,u)=>{n!==l.newPassword?u(new Error("输入的密码不相同")):u()},trigger:"blur"}]};let q=async()=>{f.value&&await f.value.validate();try{b.value=!0;let r={original_password:"",new_password:""};r.original_password=l.oldPassword,r.new_password=l.newPassword;let n=await d.userPassword(r);n.success?(P(),g({type:"success",message:"修改成功",duration:3e3})):g({type:"error",message:n.message,duration:3e3})}catch(r){g({type:"error",message:r.message,duration:3e3})}finally{b.value=!1}};return(r,n)=>{const u=c("ChatDotRound"),i=ce,C=K,A=c("UserFilled"),_=ee,L=c("Coordinate"),j=c("Tools"),z=c("Platform"),H=c("Connection"),M=c("SwitchButton"),O=oe,E=$,x=X,k=Y,h=Q,Z=W,G=J;return S(),ne("div",null,[e(E,{shadow:"hover"},{header:o(()=>[fe]),default:o(()=>[t("div",null,[t("div",we,[e(i,null,{default:o(()=>[e(u)]),_:1}),ge]),e(C),e(O,{class:"margin-top",direction:s(I).infoDirection,column:s(I).infoCol,size:"default",border:""},{default:o(()=>[e(_,null,{label:o(()=>[t("div",ve,[e(i,{class:"userinfo-cell-item-icon"},{default:o(()=>[e(A)]),_:1}),a(" 用户名 ")])]),default:o(()=>[a(" "+m(s(d).uname),1)]),_:1}),e(_,null,{label:o(()=>[t("div",he,[e(i,{class:"userinfo-cell-item-icon"},{default:o(()=>[e(L)]),_:1}),a(" 游戏ID ")])]),default:o(()=>[a(" "+m(s(d).uid),1)]),_:1}),e(_,null,{label:o(()=>[t("div",ye,[e(i,{class:"userinfo-cell-item-icon"},{default:o(()=>[e(j)]),_:1}),a(" 系统管理权限 ")])]),default:o(()=>[a(" "+m(s(d).adminFlag),1)]),_:1}),e(_,null,{label:o(()=>[t("div",Pe,[e(i,{class:"userinfo-cell-item-icon"},{default:o(()=>[e(z)]),_:1}),a(" 开发者权限 ")])]),default:o(()=>[a(" "+m(s(d).devFlag),1)]),_:1}),e(_,null,{label:o(()=>[t("div",be,[e(i,{class:"userinfo-cell-item-icon"},{default:o(()=>[e(H)]),_:1}),a(" 创建时间 ")])]),default:o(()=>[a(" "+m(s(T)),1)]),_:1}),e(_,null,{label:o(()=>[t("div",Ce,[e(i,{class:"userinfo-cell-item-icon"},{default:o(()=>[e(M)]),_:1}),a(" 有效期至 ")])]),default:o(()=>[a(" "+m(s(U)),1)]),_:1})]),_:1},8,["direction","column"])])]),_:1}),de((S(),ie(E,{style:{"margin-top":"12px"},shadow:"hover"},{header:o(()=>[Ee]),default:o(()=>[t("div",null,[t("div",xe,[e(i,null,{default:o(()=>[e(u)]),_:1}),ke]),e(C),e(x,{type:"primary",round:"",onClick:s(N)},{default:o(()=>[a("获取")]),_:1},8,["onClick"])])]),_:1})),[[G,s(y)]]),e(E,{style:{"margin-top":"12px"},shadow:"hover"},{header:o(()=>[De]),default:o(()=>[t("div",null,[t("div",Ie,[e(i,null,{default:o(()=>[e(u)]),_:1}),Ve]),e(C),e(Z,{class:"password-form-container",model:s(l),rules:R,ref_key:"passwordform",ref:f},{default:o(()=>[e(h,{label:"输入旧密码",prop:"oldPassword"},{default:o(()=>[e(k,{type:"password","show-password":"",modelValue:s(l).oldPassword,"onUpdate:modelValue":n[0]||(n[0]=w=>s(l).oldPassword=w),placeholder:"请输入旧密码"},null,8,["modelValue"])]),_:1}),e(h,{label:"输入新密码",prop:"newPassword"},{default:o(()=>[e(k,{type:"password","show-password":"",modelValue:s(l).newPassword,"onUpdate:modelValue":n[1]||(n[1]=w=>s(l).newPassword=w),placeholder:"请输入新密码"},null,8,["modelValue"])]),_:1}),e(h,{label:"确认新密码",prop:"repassword"},{default:o(()=>[e(k,{type:"password","show-password":"",modelValue:s(l).repassword,"onUpdate:modelValue":n[2]||(n[2]=w=>s(l).repassword=w),placeholder:"请确认新密码"},null,8,["modelValue"])]),_:1}),e(h,{style:{"margin-bottom":"0"}},{default:o(()=>[e(x,{loading:s(b),type:"primary",onClick:s(q)},{default:o(()=>[a("修改密码")]),_:1},8,["loading","onClick"]),e(x,{onClick:s(P)},{default:o(()=>[a("清空表单")]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])])]),_:1})])}}});const He=me(Se,[["__scopeId","data-v-ba79aadd"]]);export{He as default};
